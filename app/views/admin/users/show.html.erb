<h1><%= I18n.t("display.admin_page", name: current_user.name) %></h1>
<%= link_to I18n.t("button.user_create"), new_admin_user_path , class: "btn btn-primary pull-left" %>
<table class="table table-bordered table-striped">
  <thead>
    <tr>
      <th>ユーザー名</th>
      <th>権限</th>
      <th>担当タスク</th>
      <th>更新日時</th>
      <th>作成日時</th>
      <th colspan="3"></th>
    </tr>
  </thead>
  <tbody>
    <% @users.each do |user| %>
      <tr>
        <td><%= user.name %></td>
        <td><%= user.admin  %></td>
        <td><%= user.tasks.size %></td>
        <td><%= format_date(user.updated_at) %></td>
        <td><%= format_date(user.created_at) %></td>
        <td>
          <% if user.id == current_user.id %>
            <span class = "text-center">ー</span>
          <% elsif user.admin %>
            <%= link_to I18n.t("button.delete_admin"), admin_user_path(user.id) ,method: :delete , class: "btn btn-danger pull-left"%>
          <% else %>
            <%= link_to I18n.t("button.attach_admin"), admin_user_path(user.id) ,method: :put, class: "btn btn-primary pull-left" %>
          <% end %>
        </td>
        <td>
          <% unless user.id == current_user.id %>
            <%= link_to I18n.t("button.user_update"), edit_user_path(user.id) ,method: :get, class: "btn btn-primary pull-left" %>
          <% end %>
        </td>
        <td>
          <% unless user.id == current_user.id %>
            <%= link_to I18n.t("button.user_delete"), user_path(user.id,admin: true) ,method: :delete, class: "btn btn-danger pull-left" %>
          <% end %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>